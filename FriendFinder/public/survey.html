<!DOCTYPE html>
<html>

<head>
    <title>FriendFinder</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col s12">
                <h1>Survey Questions</h1>
                <div class="divider"></div>

                <h3>About You</h3>

                <div class="input-field col s6">
                    <h5>Name (Required)</h5>
                    <input type="text" class="validate" placeholder="Your Name Here" id="userName">
                </div>

                <!-- Survey Questions -->
                <div class="input-field col s12">
                    <h3>Question 1</h3>
                    <h5>Do you enjoy beer?</h5>
                    <select id="question1">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 2</h3>
                    <h5>Do you feel our economy is doing well?</h5>
                    <select id="question2">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 3</h3>
                    <h5>Do you like coffee in the morning?</h5>
                    <select id="question3">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 4</h3>
                    <h5>How much do you enjoy sleeping each night?</h5>
                    <select id="question4">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 5</h3>
                    <h5>When driving in traffic, are you calm?</h5>
                    <select id="question5">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 6</h3>
                    <h5>How much do you enjoy food?</h5>
                    <select id="question6">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 7</h3>
                    <h5>Do you like motorcycles?</h5>
                    <select id="question7">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 8</h3>
                    <h5>How much do you like camping?</h5>
                    <select id="question8">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 9</h3>
                    <h5>Do you feel that the world is going in a good direction?</h5>
                    <select id="question9">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>

                <div class="input-field col s12">
                    <h3>Question 10</h3>
                    <h5>You're a huge fan of traveling the world.</h5>
                    <select id="question10">
                        <option value="" selected>Choose your option</option>
                        <option value="1">1 (Strongly Disagree)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Strongly Agree)</option>
                    </select>
                </div>
                <div>
                    <button class="btn waves-effect waves-light" type="submit" id="submitButton" onclick="addinfo()">Submit Responses</button>
                </div>
            </div>
        </div>
    </div>


    <div id="modal1" class="modal">
        <div class="modal-content">
            <h4>Closest Friend Match</h4>
            <div class="divider"></div>
            <h5 id="userMatch"></h5>
            <img id="userMatchImage" class="materialboxed" width="300" src="">
        </div>
        <div>
            <a href="survey.html" class="modal-action modal-close waves-effect waves-green btn-flat">Fill Again!</a>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {

        });
        $('#submitButton').on('click', function (event) {
            event.preventDefault();
            var userInput = {
                name: $('#userName').val().trim(),
                scores: [
                    $('#question1').val().trim(),
                    $('#question2').val().trim(),
                    $('#question3').val().trim(),
                    $('#question4').val().trim(),
                    $('#question5').val().trim(),
                    $('#question6').val().trim(),
                    $('#question7').val().trim(),
                    $('#question8').val().trim(),
                    $('#question9').val().trim(),
                    $('#question10').val().trim()
                ]
            };
            $.post('/api/friends', userInput)
                .done(function (res) {
                    console.log(res);
                    var bestFriendScore = 1000
                    var bestFriend = "none"
                    var bestFriendImage = ""
                    for (i = 0; i < res.length; i++) {
                        var currentScore = 0;
                        for (j = 0; j < 10; j++) {
                            currentScore = currentScore + Math.abs(userInput.scores[j] - res[i].scores[j])
                        }
                        if (currentScore < bestFriendScore) {
                            bestFriendScore = currentScore
                            bestFriend = res[i].name
                            bestFriendImage = res[i].photo
                        }
                    }
                    $('#userMatch').text(bestFriend);
                    $('#userMatchImage').attr("src", bestFriendImage);
                    $('.modal').show()
                });
        });
    </script>
</body>

</html>